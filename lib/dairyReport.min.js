!function(t,i){"function"==typeof define&&define.amd?define(["fabric"],i):"object"==typeof exports?module.exports=i(require("fabric")):t.DairyReport=i(t.fabric)}(this,function(t){function i(t){return"function"==typeof t}function e(t,i){var s={};for(var n in t)t.hasOwnProperty(n)&&(s[n]=t[n]);for(var o in i)i.hasOwnProperty(o)&&(s.hasOwnProperty(o)?"object"==typeof s[o]&&s[o].constructor===Object&&"object"==typeof i[o]&&i[o].constructor===Object&&(s[o]=e(s[o],i[o])):s[o]=i[o]);return s}function s(i){this._canvas=new t.Canvas(i)}var n="Tahoma",o="#1c1c1c";return s.prototype={_styles:{header:{fontSize:16,fill:o,fontFamily:n,line:{fill:"#00aeb9",height:2,marginBottom:10}},subHeader:{fontSize:14,fill:o,fontFamily:n},text:{fontSize:12,fill:o,fontFamily:n},blockList:{title:{fontSize:14,fill:o,fontFamily:n,line:{fill:"#00aeb9",height:1,marginBottom:5}},rows:{fontSize:12,fill:o,fontFamily:n,line:{fill:"#E6E6E6",height:1,marginBottom:3}}},dairyExercise:{name:{fontSize:14,fill:o,fontFamily:n,line:{fill:"#00aeb9",height:1,marginBottom:5}},cell:{width:25}}},_width:0,_height:0,_top:0,_lines:[],_queue:[],styles:function(t){this._styles=e(t,this._styles)},add:function(t){var e=t.items,s=this;e.map(function(t){var e=t.type;i(s[e])&&s[e](t)})},setSizes:function(){var t=this;this._lines.map(function(i){i.width=t._width,t._canvas.add(i)}),this._canvas.setDimensions({width:this._width,height:Math.round(this._top)})},simpleText:function(i,e){var s=new t.Text(i,e),n=this;if(s.setTop(this._top),this._canvas.add(s),this._top+=s.getHeight(),e.marginBottom&&(this._top+=e.marginBottom),s.getWidth()>this._width&&(this._width=s.getWidth()),e.line){var o=new t.Rect(e.line);o.setTop(n._top),n._top+=o.getHeight(),e.line.marginBottom&&(n._top+=e.line.marginBottom),o.isLine=!0,this._lines.push(o)}this.setSizes()},header:function(t){this.simpleText(t.data,this._styles.header)},subHeader:function(t){this.simpleText(t.data,this._styles.subHeader)},text:function(i){var e=new t.Text(i.data,this._styles.text),s=i.data,n=this;if(i.maxWidth&&e.getWidth()>i.maxWidth){var o=s.split(" "),a="",h=i.maxWidth;s="",o.map(function(i){e=new t.Text(a+i,n._styles.text),e.getWidth()>h?(s+=a+"\n",a=i+" "):a+=i+" "}),s+=a}this.simpleText(s,this._styles.text)},blockList:function(t){var i=this;this.simpleText(t.data.title,this._styles.blockList.title),t.data.rows.map(function(t){i.simpleText(t,i._styles.blockList.rows)})},dairyExercise:function(t){this.simpleText(t.data.name,this._styles.dairyExercise.name);t.data.count}},s});