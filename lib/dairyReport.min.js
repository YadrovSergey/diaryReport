!function(t,e){"function"==typeof define&&define.amd?define(["fabric"],e):"object"==typeof exports?module.exports=e(require("fabric")):t.DairyReport=e(t.fabric)}(this,function(t){function e(t){return"function"==typeof t}function i(t,e){var n={};for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);for(var a in e)e.hasOwnProperty(a)&&(n.hasOwnProperty(a)?"object"==typeof n[a]&&n[a].constructor===Object&&"object"==typeof e[a]&&e[a].constructor===Object&&(n[a]=i(n[a],e[a])):n[a]=e[a]);return n}function n(t){}return n.prototype={_styles:{header:{fontSize:16,fill:"#1c1c1c",fontFamily:"Tahoma",line:{fill:"#00aeb9",height:2,marginBottom:10}},subHeader:{fontSize:14,fill:"#1c1c1c",fontFamily:"Tahoma"},text:{fontSize:12,fill:"#1c1c1c",fontFamily:"Tahoma"},blockList:{title:{fontSize:14,fill:"#1c1c1c",fontFamily:"Tahoma",line:{fill:"#00aeb9",height:1,marginBottom:5}},rows:{fontSize:12,fill:"#1c1c1c",fontFamily:"Tahoma",line:{fill:"#E6E6E6",height:1,marginBottom:3}}}},_width:0,_queue:[],styles:function(t){this._styles=i(t,this._styles)},add:function(t){var i=t.items,n=this;i.map(function(t){var i=t.type;e(n[i])&&n[i](t)})},simpleText:function(e,i){var n=new t.Text(e,i);if(i.marginBottom&&(n.marginBottom=i.marginBottom),this._queue.push(n),i.line){var o=new t.Rect(i.line);i.line.marginBottom&&(o.marginBottom=i.line.marginBottom),o.isLine=!0,this._queue.push(o)}},header:function(t){this.simpleText(t.data,this._styles.header)},subHeader:function(t){this.simpleText(t.data,this._styles.subHeader)},text:function(e){var i=new t.Text(e.data,this._styles.text),n=this;if(e.maxWidth&&i.getWidth()>e.maxWidth){var o=e.data.split(" "),a="",s="",r=e.maxWidth;o.map(function(e){i=new t.Text(a+e,n._styles.text),i.getWidth()>r?(s+=a+"\n",a=e+" "):a+=e+" "}),s+=a,i=new t.Text(s,this._styles.text)}this._queue.push(i)},blockList:function(t){var e=this;this.simpleText(t.data.title,this._styles.blockList.title),t.data.rows.map(function(t){e.simpleText(t,e._styles.blockList.rows)})},draw:function(e){var i=new t.StaticCanvas(e),n=0,o=0;this._queue.map(function(t){o=o>t.getWidth()?o:t.getWidth()}),i.setDimensions({width:o}),this._queue.map(function(t){t.setTop(n),n=t.getTop()+t.getHeight(),t.marginBottom&&(n+=t.marginBottom),t.isLine&&(t.width=o),i.add(t)}),this._queue=[]}},n});